    
    // Image Generation Feature
    openImageGenerationModal() {
        const modal = document.createElement('div');
        modal.className = 'image-gen-modal';
        modal.innerHTML = `
            <div class="modal-content">
                <div class="modal-header">
                    <h3> AI Image Generation</h3>
                    <button class="modal-close" onclick="this.closest('.image-gen-modal').remove()"></button>
                </div>
                <div class="modal-body">
                    <label>Describe the image you want to create:</label>
                    <textarea id="imagePrompt" placeholder="e.g., A futuristic city at sunset with flying cars..." rows="3"></textarea>
                    
                    <label>Style:</label>
                    <select id="imageStyle">
                        <option value="professional">Professional</option>
                        <option value="artistic">Artistic</option>
                        <option value="photorealistic">Photorealistic</option>
                        <option value="digital-art">Digital Art</option>
                        <option value="3d-render">3D Render</option>
                        <option value="anime">Anime</option>
                    </select>
                    
                    <button class="generate-btn" onclick="window.chatAppInstance.generateImage()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
                            <path d="M21 15l-5-5L5 21" stroke-width="2"/>
                        </svg>
                        Generate Enhanced Prompt
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
        document.getElementById('imagePrompt').focus();
    }
    
    async generateImage() {
        const prompt = document.getElementById('imagePrompt').value.trim();
        const style = document.getElementById('imageStyle').value;
        
        if (!prompt) {
            alert('Please enter a description for the image!');
            return;
        }
        
        // Close modal
        document.querySelector('.image-gen-modal').remove();
        
        // Hide welcome screen
        if (this.welcomeScreen) {
            this.welcomeScreen.style.display = 'none';
        }
        
        // Add user message
        this.addMessage(` Generate image: d:\Antigravity\aditi-chatbot{prompt} (d:\Antigravity\aditi-chatbot{style} style)`, 'user');
        
        // Show loading
        const loadingId = this.addLoadingMessage();
        
        try {
            const response = await fetch('/api/generate-image', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ prompt, style })
            });
            
            const data = await response.json();
            
            // Remove loading
            this.removeMessage(loadingId);
            
            if (data.success) {
                // Create enhanced message with platforms
                let message = `##  Enhanced Image Prompt\n\nd:\Antigravity\aditi-chatbot{data.response}\n\n---\n\n###  Generate Your Image:\n\n`;
                
                for (const [key, platform] of Object.entries(data.platforms)) {
                    message += `**d:\Antigravity\aditi-chatbot{platform.name}** - d:\Antigravity\aditi-chatbot{platform.best_for}\n`;
                    message += `[Open d:\Antigravity\aditi-chatbot{platform.name}](d:\Antigravity\aditi-chatbot{platform.url})\n\n`;
                }
                
                await this.addMessageWithTyping(message, 'assistant');
            } else {
                this.addMessage(` Error: d:\Antigravity\aditi-chatbot{data.error}`, 'assistant');
            }
        } catch (error) {
            this.removeMessage(loadingId);
            this.addMessage(` Error: d:\Antigravity\aditi-chatbot{error.message}`, 'assistant');
        }
    }
